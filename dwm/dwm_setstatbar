#! /bin/bash
# dwm startup script
#
# powerline symbols
# 
# 
# 
# 

# TODO: replace text with icons
# TODO: add colors to signify status
# TODO: implement toggle between short and long format

# background

# wifi

# short format: ssid
# long format: ssid, upspeed, downspeed, signal
getwifi() {
	echo "wifi: $(~/.bin/wifi_getssid)"
}

# volume

# short format: volume level
# no long format
getvolume() {
	echo "volume: $(~/.bin/audio_getvolume)"
}

# brightness

# short format: brightness level
# no long format
getbrightness() {
	echo "brightness: $(~/.bin/bright_get)"
}

# battery

# short format: battery level, status
# long format: battery level, status, time left
getbattery() {
	# TODO: (short format) implement battery status (charging/discharging)
	# TODO: (long format) display time left until full charge/time until dead
	# TODO: if multiple batteries present, only display the first one

	echo "battery: ($(~/.bin/batt_getstatus)) $(~/.bin/batt_getp)%"
}

# datetime

# short format: day of the week, 12 hour time
# long format: month/day/year, 24 hour time
getdatetime() {
	date="$(date +"%a")"
	time="$(date +"%I:%M %P")"

	# date_long="$(date +"%m/%d/%Y")"
	# time_long="$(date +"%H:%M:%S")"

	echo "date: $date $time"
	# echo "date: $date_long $time_long"
}

# all statuses

getstatus() {
	# echo -e "\x02 $(getwifi) \x01 \x02 $(getvolume) \x01 \x02 $(getbrightness) \x01 \x02 $(getbattery) \x01 \x02 $(getdatetime) \x01"
	# echo -e "\x01 $(getwifi) \x01 \x01 $(getvolume) \x01 \x01 $(getbrightness) \x01 \x01 $(getbattery) \x01 \x01 $(getdatetime) \x01"
	echo -e "$(getwifi) | $(getvolume) | $(getbrightness) | $(getbattery) | $(getdatetime) "
}

while true
do
	xsetroot -name "$(getstatus)"
	sleep 1
done


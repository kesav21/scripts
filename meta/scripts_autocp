#!/bin/sh

autolink () {

	while read newfile
	do
		dirname=$(echo $newfile | awk '{print $1}')
		filename=$(echo $newfile | awk '{print $3}')

		fullpath="$dirname$filename"
		binpath="/home/kesav/.bin/$filename"

		# if file is executable but not in ~/.bin/
		if [ -x "$fullpath" ] && [ ! -e "$binpath" ]
		then
			# create a symlink to the file
			ln -sv "$fullpath" "$binpath"
		fi
	done

}

monitordir="/home/kesav/.scripts/"
inotifywait -m -r -e attrib "${monitordir}" | autolink

